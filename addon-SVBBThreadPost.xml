<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="SVBBThreadPost" title="SV: BB Code: Thread and Post" version_string="1.0.4" version_id="4" url="http://forums.sufficientvelocity.com" install_callback_class="" install_callback_method="" uninstall_callback_class="" uninstall_callback_method="">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <admin_template_modifications/>
  <code_events/>
  <code_event_listeners/>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups/>
  <permissions>
    <permission_groups/>
    <permissions/>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="custom_bb_code_post_desc" version_id="0" version_string="llama"><![CDATA[This bbcode provides a link to a given post number.]]></phrase>
    <phrase title="custom_bb_code_post_title" global_cache="1" version_id="0" version_string="llama"><![CDATA[Post Linker]]></phrase>
    <phrase title="custom_bb_code_thread_desc" version_id="0" version_string="llama"><![CDATA[This bbcode provides a link to a given thread number.]]></phrase>
    <phrase title="custom_bb_code_thread_title" global_cache="1" version_id="0" version_string="llama"><![CDATA[Thread Linker]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties/>
  <templates/>
  <public_template_modifications>
    <modification template="post_permalink" modification_key="bbcode_thread_and_post_page_permalink_1" description="Extends permalinks with new Post link feature." execution_order="9" enabled="1" action="str_replace">
      <find><![CDATA[value="[URL=&quot;{xen:link full:threads/post-permalink, $thread, 'post={$post}'}&quot;]{$thread.title}[/URL]"]]></find>
      <replace><![CDATA[value="[post={$post.post_id}]{$thread.title}[/post]"]]></replace>
    </modification>
    <modification template="post_permalink" modification_key="bbcode_thread_and_post_page_permalink_2" description="Fixup permalinks to go to the post, and not the thread" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[{xen:link full:threads/post-permalink, $thread, 'post={$post}'}]]></find>
      <replace><![CDATA[{xen:link full:posts, $post}]]></replace>
    </modification>
    <modification template="post" modification_key="bcode_thread_and_post_page_permalink_3" description="Fixup permalinks to go to the post, and not the thread" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[{xen:link threads/post-permalink, $thread, 'post={$post}'}]]></find>
      <replace><![CDATA[{xen:link posts, $post}]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes>
    <bb_code bb_code_id="post" bb_code_mode="callback" has_option="yes" callback_class="SV_BBCodeThreadPost_BbCode_ThreadPost" callback_method="post" option_regex="/^[0-9]+$/" trim_lines_after="0" plain_children="0" disable_smilies="0" disable_nl2br="0" disable_autolink="1" allow_empty="0" allow_signature="1" editor_icon_url="" sprite_mode="0" active="1">
      <replace_html><![CDATA[]]></replace_html>
      <replace_html_email><![CDATA[]]></replace_html_email>
      <replace_text><![CDATA[]]></replace_text>
      <example><![CDATA[[post=PostID]link description[/post]]]></example>
    </bb_code>
    <bb_code bb_code_id="thread" bb_code_mode="callback" has_option="yes" callback_class="SV_BBCodeThreadPost_BbCode_ThreadPost" callback_method="thread" option_regex="/^[0-9]+$/" trim_lines_after="0" plain_children="0" disable_smilies="0" disable_nl2br="0" disable_autolink="1" allow_empty="0" allow_signature="1" editor_icon_url="" sprite_mode="0" active="1">
      <replace_html><![CDATA[]]></replace_html>
      <replace_html_email><![CDATA[]]></replace_html_email>
      <replace_text><![CDATA[]]></replace_text>
      <example><![CDATA[[thread=ThreadID]link description[/thread]]]></example>
    </bb_code>
  </bb_codes>
</addon>
